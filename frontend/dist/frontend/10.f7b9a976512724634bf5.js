(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{cAcB:function(n,t,e){"use strict";e.r(t);var u,r=e("CcnG"),l=function(){return function(){}}(),a=e("xYTU"),i=e("pMnS"),o=e("t68o"),s=e("Vim7"),b=e("bujt"),c=e("UodH"),d=e("dWZg"),A=e("lLAP"),h=e("wFw1"),p=e("mrSG"),g=e("5XPN"),f=e.n(g),w=e("qXBG"),m=e("15JJ"),M=e("9Z1F"),j=e("F/XL"),v=e("0/uQ"),y=function(){function n(n,t,e,r){var l=this;this.auth=n,this.route=t,this.router=e,this.http=r,this.loginText="Login",this.handleSignup=function(n){return l.http.post("users",{publicAddress:n})},this.handleSignMessage=function(n){var t=n.publicAddress,e=n.nonce;return p.__awaiter(l,void 0,void 0,function(){var n;return p.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.eth.personal.sign("I am signing my one-time nonce: "+e,t,"")];case 1:return n=r.sent(),[2,{publicAddress:t,signature:n}];case 2:throw r.sent(),new Error("You need to sign the message to be able to log in.");case 3:return[2]}})})},this.handleAuthenticate=function(n){return l.http.post("auth",{publicAddress:n.publicAddress,signature:n.signature})}}return n.prototype.ngOnInit=function(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"},n.prototype.ngOnDestroy=function(){},n.prototype.onClick=function(){return p.__awaiter(this,void 0,void 0,function(){var n,t,e=this;return p.__generator(this,function(r){switch(r.label){case 0:if(!window.ethereum)return window.alert("Please install MetaMask first."),[2];if(u)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.ethereum.enable()];case 2:return r.sent(),u=new f.a(window.ethereum),[3,4];case 3:return r.sent(),window.alert("You need to allow MetaMask."),[2];case 4:return[4,u.eth.getCoinbase()];case 5:return(n=r.sent())?(t=n.toLowerCase(),this.http.get("users?publicAddress="+t).pipe(Object(m.a)(function(n){return n.length?Object(j.a)(n[0]):e.handleSignup(t)}),Object(m.a)(this.handleSignMessage),Object(m.a)(this.handleAuthenticate),Object(m.a)(function(n){return e.auth.login(n)}),Object(M.a)(function(n){return window.alert(n.message?n.message:n),Object(v.a)([])})).subscribe(function(){return e.router.navigateByUrl(e.returnUrl)}),[2]):(window.alert("Please activate MetaMask first."),[2])}})})},n}(),C=e("ZYCi"),k=e("t/Na"),O=r.qb({encapsulation:0,styles:[[".title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:30px}.actions[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:20px}"]],data:{}});function _(n){return r.Lb(0,[(n()(),r.sb(0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),r.sb(1,0,null,null,1,"h1",[["class","title"]],null,null,null,null,null)),(n()(),r.Jb(-1,null,[" Login "])),(n()(),r.sb(3,0,null,null,3,"div",[["class","actions"]],null,null,null,null,null)),(n()(),r.sb(4,0,null,null,2,"button",[["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,e){var u=!0;return"click"===t&&(u=!1!==n.component.onClick()&&u),u},b.d,b.b)),r.rb(5,180224,null,0,c.b,[r.k,d.a,A.c,[2,h.a]],null,null),(n()(),r.Jb(-1,0,[" Login with MetaMask "]))],null,function(n,t){n(t,4,0,r.Cb(t,5).disabled||null,"NoopAnimations"===r.Cb(t,5)._animationMode)})}function L(n){return r.Lb(0,[(n()(),r.sb(0,0,null,null,1,"app-login",[],null,null,null,_,O)),r.rb(1,245760,null,0,y,[w.a,C.a,C.o,k.c],null,null)],function(n,t){n(t,1,0)},null)}var P=r.ob("app-login",y,L,{},{},[]),S=e("Ip0R"),x=e("eDkP"),Y=e("Fzqc"),F=e("gIcY"),J=e("M2Lx"),N=e("uGex"),U=e("Wf4p"),q=e("o3x0"),Z=e("mVsa"),G=e("4c35"),I=e("qAlS"),V=e("ZYjt"),X=e("vARd"),z=e("LC5p"),B=e("0/Q6"),D=e("8mMr"),K=e("Nsh5"),Q=e("seP3"),R=e("/VYK"),T=e("b716"),W=e("SMsm"),E=e("FVSy"),H=e("/dO6"),$=e("Z+uX"),nn=e("PCNd"),tn=function(){return function(){}}(),en=e("YSh2");e.d(t,"AuthModuleNgFactory",function(){return un});var un=r.pb(l,[],function(n){return r.zb([r.Ab(512,r.j,r.fb,[[8,[a.a,a.b,i.a,o.a,s.a,P]],[3,r.j],r.A]),r.Ab(4608,S.m,S.l,[r.w,[2,S.y]]),r.Ab(4608,x.c,x.c,[x.i,x.e,r.j,x.h,x.f,r.s,r.C,S.d,Y.b,[2,S.g]]),r.Ab(5120,x.j,x.k,[x.c]),r.Ab(4608,F.d,F.d,[]),r.Ab(4608,F.t,F.t,[]),r.Ab(4608,J.c,J.c,[]),r.Ab(5120,N.a,N.b,[x.c]),r.Ab(4608,U.b,U.b,[]),r.Ab(5120,q.c,q.d,[x.c]),r.Ab(135680,q.e,q.e,[x.c,r.s,[2,S.g],[2,q.b],q.c,[3,q.e],x.e]),r.Ab(5120,Z.b,Z.g,[x.c]),r.Ab(1073742336,S.c,S.c,[]),r.Ab(1073742336,Y.a,Y.a,[]),r.Ab(1073742336,G.f,G.f,[]),r.Ab(1073742336,d.b,d.b,[]),r.Ab(1073742336,I.c,I.c,[]),r.Ab(1073742336,x.g,x.g,[]),r.Ab(1073742336,U.j,U.j,[[2,U.c],[2,V.h]]),r.Ab(1073742336,U.t,U.t,[]),r.Ab(1073742336,c.c,c.c,[]),r.Ab(1073742336,X.e,X.e,[]),r.Ab(1073742336,F.r,F.r,[]),r.Ab(1073742336,F.o,F.o,[]),r.Ab(1073742336,C.s,C.s,[[2,C.z],[2,C.o]]),r.Ab(1073742336,z.a,z.a,[]),r.Ab(1073742336,U.l,U.l,[]),r.Ab(1073742336,U.r,U.r,[]),r.Ab(1073742336,B.a,B.a,[]),r.Ab(1073742336,D.b,D.b,[]),r.Ab(1073742336,K.h,K.h,[]),r.Ab(1073742336,U.p,U.p,[]),r.Ab(1073742336,J.d,J.d,[]),r.Ab(1073742336,Q.d,Q.d,[]),r.Ab(1073742336,N.d,N.d,[]),r.Ab(1073742336,R.c,R.c,[]),r.Ab(1073742336,T.b,T.b,[]),r.Ab(1073742336,q.j,q.j,[]),r.Ab(1073742336,W.c,W.c,[]),r.Ab(1073742336,E.g,E.g,[]),r.Ab(1073742336,Z.e,Z.e,[]),r.Ab(1073742336,F.g,F.g,[]),r.Ab(1073742336,H.d,H.d,[]),r.Ab(1073742336,$.c,$.c,[]),r.Ab(1073742336,nn.a,nn.a,[]),r.Ab(1073742336,tn,tn,[]),r.Ab(1073742336,l,l,[]),r.Ab(256,q.b,nn.b,[]),r.Ab(256,H.a,{separatorKeyCodes:[en.f]},[]),r.Ab(1024,C.m,function(){return[[{path:"login",component:y}]]},[])])})}}]);